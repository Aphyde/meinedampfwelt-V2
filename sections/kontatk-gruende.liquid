{% comment %} Meine Dampfwelt – Help/Contact Grid {% endcomment %}
<section class="mdw-help-grid section-{{ section.id }}">
  <div class="mdw-help-grid__inner {% if section.settings.narrow %}mdw--narrow{% endif %}">
    
    {% if section.settings.heading != blank %}
      <h2 class="mdw-help-grid__heading">{{ section.settings.heading }}</h2>
    {% endif %}

    {% if section.settings.subheading != blank %}
      <p class="mdw-help-grid__subheading">{{ section.settings.subheading }}</p>
    {% endif %}

    <div class="mdw-help-grid__grid">
      {% for block in section.blocks %}
        {% assign b = block.settings %}
        {% if b.link != blank %}
          <a href="{{ b.link }}" class="mdw-card {% if b.featured %}mdw-card--featured{% endif %}" {{ block.shopify_attributes }}>
        {% else %}
          <div class="mdw-card {% if b.featured %}mdw-card--featured{% endif %}" {{ block.shopify_attributes }}>
        {% endif %}

          <div class="mdw-card__icon">
            {% if b.icon != blank %}
              <img src="{{ b.icon | image_url: width: 200 }}" alt="" loading="lazy" width="{{ b.icon.width }}" height="{{ b.icon.height }}">
            {% endif %}
          </div>

          <h3 class="mdw-card__title">{{ b.title }}</h3>

          {% if b.text != blank %}
            <p class="mdw-card__text">{{ b.text }}</p>
          {% endif %}

          {% if b.duration_label != blank %}
            <div class="mdw-card__duration">{{ b.duration_label }}</div>
          {% endif %}

        {% if b.link != blank %}</a>{% else %}</div>{% endif %}
      {% endfor %}
    </div>
  </div>
</section>

<style>
  .section-{{ section.id }}{
    --mdw-accent: {{ section.settings.accent_color }};
    --mdw-title: {{ section.settings.title_color }};
    --mdw-text: {{ section.settings.text_color }};
    --mdw-card-bg: {{ section.settings.card_bg }};
    --mdw-page-bg: {{ section.settings.page_bg }};
    --mdw-radius: {{ section.settings.radius }}px;
    --mdw-shadow: 0 8px 24px rgba(0,0,0,{{ section.settings.shadow_strength | divided_by: 100.0 }});
    --mdw-shadow-soft: 0 2px 12px rgba(0,0,0,0.06);
    background: var(--mdw-page-bg);
    padding: {{ section.settings.pad_top }}px 16px {{ section.settings.pad_bottom }}px;
  }
  .section-{{ section.id }} .mdw--narrow{max-width: 1120px;margin:0 auto;}
  .section-{{ section.id }} .mdw-help-grid__heading{
    text-align:center;margin: 0 0 14px;color: var(--mdw-title);
    font-size: clamp(24px, 2.2vw, 34px); line-height: 1.15; font-weight: 700;
  }
  .section-{{ section.id }} .mdw-help-grid__subheading{
    text-align:center;margin: 0 0 36px; color: var(--mdw-text);
    font-size: 16px; line-height: 1.6; max-width: 680px; margin-left:auto; margin-right:auto;
  }
  .section-{{ section.id }} .mdw-help-grid__grid{
    display:grid; gap: 36px;
    grid-template-columns: 1fr;
  }
  @media (min-width: 740px){
    .section-{{ section.id }} .mdw-help-grid__grid{ grid-template-columns: repeat(2,1fr); }
  }
  @media (min-width: 1024px){
    .section-{{ section.id }} .mdw-help-grid__grid{ grid-template-columns: repeat(3,1fr); }
  }
  .section-{{ section.id }} .mdw-card{
    display:flex; flex-direction:column; align-items:center; text-align:center;
    background: var(--mdw-card-bg); border-radius: var(--mdw-radius);
    box-shadow: var(--mdw-shadow-soft);
    padding: 28px; text-decoration:none; transition: transform .2s ease, box-shadow .2s ease;
    border: 1px solid rgba(0,0,0,0.06);
  }
  .section-{{ section.id }} .mdw-card:hover{ transform: translateY(-2px); box-shadow: var(--mdw-shadow); }
  .section-{{ section.id }} .mdw-card--featured{ box-shadow: var(--mdw-shadow); }
  .section-{{ section.id }} .mdw-card__icon{ margin-bottom: 14px; }
  .section-{{ section.id }} .mdw-card__icon img{ width: 76px; height:auto; display:block; }
  .section-{{ section.id }} .mdw-card__title{
    margin: 6px 0 8px; color: var(--mdw-title);
    font-size: clamp(18px, 1.6vw, 22px); font-weight: 700;
  }
  .section-{{ section.id }} .mdw-card__text{
    margin: 0 0 14px; color: var(--mdw-text); line-height: 1.6; font-size: 15px;
    max-width: 48ch;
  }
  .section-{{ section.id }} .mdw-card__duration{
    margin-top: auto; color: var(--mdw-accent); font-weight: 800; font-size: 15px;
  }
</style>

{% schema %}
{
  "name": "MDW – Help/Contact Grid",
  "tag": "section",
  "class": "mdw-help-grid-wrap",
  "settings": [
    { "type": "text", "id": "heading", "label": "Überschrift", "default": "Hilfe & Kontakt" },
    { "type": "textarea", "id": "subheading", "label": "Beschreibung unter Überschrift", "default": "Hier findest du schnell Antworten auf die häufigsten Anliegen – von Retouren über Rechnungen bis zu Feedback." },
    { "type": "checkbox", "id": "narrow", "label": "Schmaler Inhalt (max. 1120px)", "default": true },

    { "type": "header", "content": "Layout & Stil" },
    { "type": "color", "id": "page_bg", "label": "Seitenhintergrund", "default": "#ffffff" },
    { "type": "color", "id": "card_bg", "label": "Karten-Hintergrund", "default": "#ffffff" },
    { "type": "color", "id": "title_color", "label": "Titel-Farbe", "default": "#111111" },
    { "type": "color", "id": "text_color", "label": "Text-Farbe", "default": "#4a4a4a" },
    { "type": "color", "id": "accent_color", "label": "Akzent (Dauer)", "default": "#1FA247" },

    { "type": "range", "id": "radius", "min": 0, "max": 24, "step": 1, "unit": "px", "label": "Eckenradius", "default": 12 },
    { "type": "range", "id": "shadow_strength", "min": 0, "max": 40, "step": 1, "unit": "%", "label": "Schatten-Stärke (Hover/Featured)", "default": 12 },

    { "type": "range", "id": "pad_top", "min": 0, "max": 120, "step": 4, "unit": "px", "label": "Padding oben", "default": 44 },
    { "type": "range", "id": "pad_bottom", "min": 0, "max": 120, "step": 4, "unit": "px", "label": "Padding unten", "default": 44 }
  ],
  "blocks": [
    {
      "type": "item",
      "name": "Karte",
      "limit": 12,
      "settings": [
        { "type": "image_picker", "id": "icon", "label": "Icon (SVG/PNG)" },
        { "type": "text", "id": "title", "label": "Titel", "default": "Titel" },
        { "type": "textarea", "id": "text", "label": "Beschreibung", "default": "Kurzbeschreibung…" },
        { "type": "text", "id": "duration_label", "label": "Dauer-Label", "default": "Dauer: 2 Minuten" },
        { "type": "url", "id": "link", "label": "Link (optional)" },
        { "type": "checkbox", "id": "featured", "label": "Hervorheben (stärkerer Schatten)", "default": false }
      ]
    }
  ],
  "presets": [
    {
      "name": "MDW – Help/Contact Grid",
      "category": "Kontakt & Hilfe",
      "blocks": [
        {
          "type": "item",
          "settings": {
            "title": "Retoure & Reklamation",
            "text": "Rücksendung einfach gemacht. Füll einfach das Formular aus und schicke deine Produkte ganz easy zurück. Bei Mängeln ist es genauso einfach.",
            "duration_label": "Dauer: 2 Minuten"
          }
        },
        {
          "type": "item",
          "settings": {
            "title": "Defektes Paket erhalten",
            "text": "Hier kannst du deine Schadensmeldung zum beschädigten Paket einreichen.",
            "duration_label": "Dauer: 2 Minuten"
          }
        },
        {
          "type": "item",
          "settings": {
            "title": "Größenguide",
            "text": "Nicht sicher, welche Größe du brauchst? Ab zum Größenguide!",
            "duration_label": "Dauer: 2 Minuten"
          }
        },
        {
          "type": "item",
          "settings": {
            "title": "Rechnung",
            "text": "Du brauchst die Rechnung zu einer oder mehreren Bestellungen? Hier erfährst du, wie du sie sofort bekommst.",
            "duration_label": "Dauer: 2 Minuten"
          }
        },
        {
          "type": "item",
          "settings": {
            "featured": true,
            "title": "Waschanleitung",
            "text": "So pflegst du deine Artikel richtig – kurze Anleitung/Videos.",
            "duration_label": "Dauer: 2 Minuten"
          }
        },
        {
          "type": "item",
          "settings": {
            "title": "Feedback",
            "text": "Ist dir etwas aufgefallen, was wir besser machen können? Sag’s uns – wir freuen uns über dein Feedback!",
            "duration_label": "Dauer: 2 Minuten"
          }
        }
      ]
    }
  ]
}
{% endschema %}
